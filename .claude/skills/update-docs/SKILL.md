---
name: update-docs
description: 実装完了後にすべてのドキュメント（README・設計書・要件定義書）を最新化する。新機能の追加、バグ修正、リファクタリング後に使用する。
---

# ドキュメント一括最新化

機能の実装が完了した後、関連するすべてのドキュメントを最新の状態に更新する。

以下の3つのドキュメントカテゴリを順番に更新する:

1. **開発ドキュメント**（設計書・要件定義書）
2. **README.md**
3. **一貫性チェック**

---

## Phase 1: 変更内容の把握（共通）

```bash
git diff HEAD~5 --name-only
git log --oneline -10
```

変更されたソースファイルから、どの機能が実装・変更されたかを特定する。

---

## Phase 2: 開発ドキュメントの更新

### 対象ドキュメント

1. **設計書** (`docs/design/<feature>.md`) - コンポーネント設計、型定義、AWS SDK連携
2. **要件定義書** (`docs/requirements.md`) - 機能スコープ、画面フロー、キーバインド

### Step 2-1: 設計書の更新 (`docs/design/`)

該当する設計書が存在する場合、以下を更新:

- **実装ステータス**: 冒頭のステータスブロックを更新
  ```markdown
  > **✅ 実装完了** (YYYY-MM-DD)
  >
  > 実装内容の簡潔な説明
  ```
- **コンポーネント仕様**: 実装に合わせて Props 型定義やパラメータを修正
- **AWS SDK連携**: 実装済みのAPI呼び出しパターンを更新

該当する設計書が存在しない場合、新規作成:

```markdown
# <機能名> 設計書

## 実装ステータス
> **✅ 実装完了** (YYYY-MM-DD)
> 実装内容の説明

## 1. 概要
### 1.1 目的
### 1.2 スコープ
### 1.3 設計原則

## 2. コンポーネント仕様
## 3. 実装詳細
```

### Step 2-2: 要件定義書の更新 (`docs/requirements.md`)

新しい機能が実装された場合:

- **機能スコープ**: 実装済み機能の追加、「今回やらないこと」からの移動
- **画面フロー**: 新しい画面遷移の反映
- **キーバインド**: 新しいキー操作の追加
- **技術スタック**: 新しい依存関係があれば追記

---

## Phase 3: README.md の更新

### 対象ファイル

- `README.md` (英語)

### Step 3-1: 新機能の追加

新しい機能やコマンドオプションが実装された場合:

1. **Features セクション**: 必要であれば新しい特徴を追加
2. **Usage セクション**: コマンド例やオプションを更新
3. **Installation セクション**: インストール手順に変更があれば更新

### Step 3-2: 既存機能の変更

コマンドオプションやキーバインドが変更された場合:

1. 使用方法をソースコード (`src/cli.tsx`) と一致させる
2. コード例が動作することを確認する

### Step 3-3: コード例の検証

README内のコード例が最新の実装で動作するか確認:

1. `src/index.ts` のエクスポートと一致しているか
2. コマンドラインオプションが `src/cli.tsx` と一致しているか
3. import文が正しいか（`titmouse` からのインポート）

---

## Phase 4: 一貫性チェック（全体）

すべてのドキュメントを更新した後、以下を確認:

1. `src/index.ts` でエクスポートされている全モジュールがREADMEに記載されているか
2. 要件定義書の機能スコープと実際の実装が一致しているか
3. キーバインド表がソースコードの実装と一致しているか
4. 設計書と要件定義書のステータスが矛盾していないか
5. ドキュメント内の日付が正しいこと
6. ファイルパスの参照が実際のコードと一致すること

## 記述ルール

- `README.md` は**英語**で記述する
- 開発ドキュメント（設計書・要件定義書）は**日本語**で記述する
- コード例は TypeScript で記述する
- 既存のマークダウンスタイル・インデントを維持する
- コード例は完全に動作するものにする（断片的なコードを避ける）
