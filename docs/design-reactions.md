# ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¨­è¨ˆæ›¸

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v0.2.0
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: æœªå®Ÿè£…
**æœ€çµ‚æ›´æ–°**: 2026-02-14

## æ¦‚è¦

ã‚³ãƒ¡ãƒ³ãƒˆã¸ã®çµµæ–‡å­—ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆğŸ‘ğŸ‘ğŸ˜„ğŸ‰ğŸ˜•â¤ï¸ğŸš€ğŸ‘€ï¼‰ã‚’è¿½åŠ ãƒ»å‰Šé™¤ãƒ»è¡¨ç¤ºã™ã‚‹æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹ã€‚ãƒ†ã‚­ã‚¹ãƒˆã‚’æ›¸ã‹ãšã«æ„æ€ã‚’ç¤ºã™è»½é‡ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æ‰‹æ®µã§ã‚ã‚Šã€LGTM ã®ä»£æ›¿ã¨ã—ã¦ã‚‚æœ‰åŠ¹ã€‚PR ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹ç‡ã‚’å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒç›®çš„ã€‚

## ã‚¹ã‚³ãƒ¼ãƒ—

### ä»Šå›ã‚„ã‚‹ã“ã¨

- ã‚³ãƒ¡ãƒ³ãƒˆã«ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹ï¼ˆ`g` ã‚­ãƒ¼ â†’ çµµæ–‡å­—é¸æŠ â†’ é€ä¿¡ï¼‰
- ã‚³ãƒ¡ãƒ³ãƒˆæœ«å°¾ã«ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒãƒƒã‚¸ã‚’è¡¨ç¤ºï¼ˆä¾‹: ğŸ‘Ã—2 ğŸ‰Ã—1ï¼‰
- åŒã˜ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å†é¸æŠã§å‰Šé™¤ï¼ˆãƒˆã‚°ãƒ«å‹•ä½œï¼‰
- PR è©³ç´°èª­ã¿è¾¼ã¿æ™‚ã«ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±ã‚’ä¸€æ‹¬å–å¾—
- ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ /å‰Šé™¤å¾Œã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±è‡ªå‹•ãƒªãƒ­ãƒ¼ãƒ‰
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆæ¨©é™ä¸è¶³ã€ã‚³ãƒ¡ãƒ³ãƒˆå‰Šé™¤æ¸ˆã¿ç­‰ï¼‰

### ä»Šå›ã‚„ã‚‰ãªã„ã“ã¨

- ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä¸€è¦§è¡¨ç¤ºï¼ˆã‚«ãƒ¼ã‚½ãƒ«ã‚’åˆã‚ã›ã¦è©³ç´°è¡¨ç¤ºç­‰ï¼‰ â†’ å°†æ¥æ¤œè¨
- ã‚«ã‚¹ã‚¿ãƒ çµµæ–‡å­—ã®è¿½åŠ  â†’ CodeCommit API ãŒå®šç¾©æ¸ˆã¿ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ã¿ã‚µãƒãƒ¼ãƒˆ
- ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ•°ã«ã‚ˆã‚‹ã‚³ãƒ¡ãƒ³ãƒˆã®ã‚½ãƒ¼ãƒˆã‚„ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚° â†’ å°†æ¥æ¤œè¨
- ã‚³ãƒŸãƒƒãƒˆãƒ“ãƒ¥ãƒ¼ï¼ˆviewIndex >= 0ï¼‰ã§ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ“ä½œ â†’ ã‚³ãƒ¡ãƒ³ãƒˆãŒè¡¨ç¤ºã•ã‚Œãªã„ãŸã‚ä¸è¦

## AWS SDK API

### PutCommentReactionCommandï¼ˆæ–°è¦ï¼‰

ã‚³ãƒ¡ãƒ³ãƒˆã«ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹ã€‚åŒã˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒåŒã˜ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å†é€ä¿¡ã™ã‚‹ã¨**å‰Šé™¤ï¼ˆãƒˆã‚°ãƒ«ï¼‰**ã•ã‚Œã‚‹ã€‚å‘¼ã³å‡ºã—å…ƒã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ã¿æ“ä½œå¯èƒ½ã€‚

```typescript
import { PutCommentReactionCommand } from "@aws-sdk/client-codecommit";

// Input
{
  commentId: string;      // å¿…é ˆ: ã‚³ãƒ¡ãƒ³ãƒˆID
  reactionValue: string;  // å¿…é ˆ: ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³å€¤ï¼ˆemoji short codeï¼‰
}

// Output
// HTTP 200 ã®ã¿ï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒœãƒ‡ã‚£ãªã—ï¼‰
```

**ç‰¹å¾´**:
- è‡ªåˆ†ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ã¿æ“ä½œå¯èƒ½ï¼ˆä»–äººã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯è¿½åŠ ãƒ»å‰Šé™¤ä¸å¯ï¼‰
- åŒã˜ `reactionValue` ã‚’å†é€ä¿¡ã™ã‚‹ã¨ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒå‰Šé™¤ã•ã‚Œã‚‹ï¼ˆãƒˆã‚°ãƒ«å‹•ä½œï¼‰
- `reactionValue` ã«ç©ºæ–‡å­—åˆ—ã¾ãŸã¯ `null` ã‚’é€ä¿¡ã™ã‚‹ã¨ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³å‰Šé™¤
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒœãƒ‡ã‚£ãªã—ï¼ˆ`$metadata` ã®ã¿ï¼‰

**`reactionValue` ã®å€¤**: CodeCommit ã¯ä»¥ä¸‹ã® emoji short code ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹:
- `:thumbsup:` â†’ ğŸ‘
- `:thumbsdown:` â†’ ğŸ‘
- `:confused:` â†’ ğŸ˜•
- `:heart:` â†’ â¤ï¸
- `:rocket:` â†’ ğŸš€
- `:eyes:` â†’ ğŸ‘€
- `:hooray:` â†’ ğŸ‰
- `:laugh:` â†’ ğŸ˜„

### GetCommentReactionsCommandï¼ˆæ–°è¦ï¼‰

ã‚³ãƒ¡ãƒ³ãƒˆã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ä¸€è¦§ã‚’å–å¾—ã™ã‚‹ã€‚

```typescript
import { GetCommentReactionsCommand } from "@aws-sdk/client-codecommit";

// Input
{
  commentId: string;           // å¿…é ˆ: ã‚³ãƒ¡ãƒ³ãƒˆID
  maxResults?: number;         // ä»»æ„: æœ€å¤§ä»¶æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ»ä¸Šé™: 1000ï¼‰
  nextToken?: string;          // ä»»æ„: ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³
  reactionUserArn?: string;    // ä»»æ„: ç‰¹å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ã¿å–å¾—
}

// Output
{
  reactionsForComment?: ReactionForComment[];  // ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ä¸€è¦§
  nextToken?: string;                          // æ¬¡ãƒšãƒ¼ã‚¸ãƒˆãƒ¼ã‚¯ãƒ³
}
```

**`ReactionForComment` å‹**:

```typescript
interface ReactionForComment {
  reaction?: {
    emoji?: string;       // çµµæ–‡å­—ï¼ˆä¾‹: "ğŸ‘"ï¼‰
    shortCode?: string;   // ã‚·ãƒ§ãƒ¼ãƒˆã‚³ãƒ¼ãƒ‰ï¼ˆä¾‹: ":thumbsup:"ï¼‰
    unicode?: string;     // Unicode ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
  };
  reactionUsers?: string[];              // ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã® ARN ä¸€è¦§
  reactionsFromDeletedUsersCount?: number; // å‰Šé™¤ã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ•°
}
```

### API æ¯”è¼ƒ

| é …ç›® | PutCommentReaction | GetCommentReactions |
|------|-------------------|-------------------|
| æ“ä½œç¨®åˆ¥ | æ›¸ãè¾¼ã¿ | èª­ã¿å–ã‚Š |
| å¿…é ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | 2ï¼ˆcommentId, reactionValueï¼‰ | 1ï¼ˆcommentIdï¼‰ |
| ãƒ¬ã‚¹ãƒãƒ³ã‚¹ | ãªã—ï¼ˆHTTP 200 ã®ã¿ï¼‰ | ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ä¸€è¦§ |
| ãƒˆã‚°ãƒ«å‹•ä½œ | ã‚ã‚Šï¼ˆåŒã˜ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å†é€ä¿¡ã§å‰Šé™¤ï¼‰ | - |
| ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ | - | ã‚ã‚Šï¼ˆnextTokenï¼‰ |

### API ã‚¨ãƒ©ãƒ¼ä¸€è¦§

#### PutCommentReaction

| ä¾‹å¤– | HTTP | èª¬æ˜ |
|------|------|------|
| `CommentDeletedException` | 400 | ã‚³ãƒ¡ãƒ³ãƒˆãŒæ—¢ã«å‰Šé™¤æ¸ˆã¿ |
| `CommentDoesNotExistException` | 400 | ã‚³ãƒ¡ãƒ³ãƒˆãŒå­˜åœ¨ã—ãªã„ |
| `CommentIdRequiredException` | 400 | `commentId` ãŒæœªæŒ‡å®š |
| `InvalidCommentIdException` | 400 | `commentId` ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒä¸æ­£ |
| `InvalidReactionValueException` | 400 | `reactionValue` ãŒä¸æ­£ |

#### GetCommentReactions

| ä¾‹å¤– | HTTP | èª¬æ˜ |
|------|------|------|
| `CommentDeletedException` | 400 | ã‚³ãƒ¡ãƒ³ãƒˆãŒæ—¢ã«å‰Šé™¤æ¸ˆã¿ |
| `CommentDoesNotExistException` | 400 | ã‚³ãƒ¡ãƒ³ãƒˆãŒå­˜åœ¨ã—ãªã„ |
| `CommentIdRequiredException` | 400 | `commentId` ãŒæœªæŒ‡å®š |
| `InvalidCommentIdException` | 400 | `commentId` ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒä¸æ­£ |
| `InvalidContinuationTokenException` | 400 | ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ãŒä¸æ­£ |
| `InvalidMaxResultsException` | 400 | `maxResults` ã®å€¤ãŒä¸æ­£ |
| `InvalidReactionUserArnException` | 400 | `reactionUserArn` ãŒä¸æ­£ |

## ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### æ–°è¦å‹

```typescript
// src/services/codecommit.ts ã«è¿½åŠ 

/** ã‚³ãƒ¡ãƒ³ãƒˆã”ã¨ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³é›†ç´„æƒ…å ± */
export interface ReactionSummary {
  emoji: string;       // è¡¨ç¤ºç”¨çµµæ–‡å­—ï¼ˆä¾‹: "ğŸ‘"ï¼‰
  shortCode: string;   // API ç”¨ã‚·ãƒ§ãƒ¼ãƒˆã‚³ãƒ¼ãƒ‰ï¼ˆä¾‹: ":thumbsup:"ï¼‰
  count: number;       // ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ•°ï¼ˆå‰Šé™¤æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼å«ã‚€ï¼‰
  userArns: string[];  // ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã® ARN ä¸€è¦§
}

/** commentId â†’ ReactionSummary[] ã®ãƒãƒƒãƒ”ãƒ³ã‚° */
export type ReactionsByComment = Map<string, ReactionSummary[]>;
```

### æ—¢å­˜å‹ã¸ã®å½±éŸ¿

#### CommentThread

å¤‰æ›´ãªã—ã€‚ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±ã¯ã‚³ãƒ¡ãƒ³ãƒˆã‚¹ãƒ¬ãƒƒãƒ‰ã¨ã¯åˆ¥ã« `ReactionsByComment` ã¨ã—ã¦ç®¡ç†ã™ã‚‹ã€‚ç†ç”±:
- `GetCommentReactionsCommand` ã¯ã‚³ãƒ¡ãƒ³ãƒˆIDã”ã¨ã«å€‹åˆ¥å‘¼ã³å‡ºã—ãŒå¿…è¦
- `GetCommentsForPullRequestCommand` ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«ã¯ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±ãŒå«ã¾ã‚Œãªã„
- ã‚³ãƒ¡ãƒ³ãƒˆã‚¹ãƒ¬ãƒƒãƒ‰ã®æ›´æ–°ï¼ˆ`reloadComments`ï¼‰ã¨ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ›´æ–°ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’ç‹¬ç«‹ã•ã›ã‚‹ãŸã‚

#### DisplayLine

`reactionText` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ ã™ã‚‹ã€‚

```typescript
interface DisplayLine {
  type: /* æ—¢å­˜ã®å‹ã™ã¹ã¦ */;
  text: string;
  filePath?: string;
  beforeLineNumber?: number;
  afterLineNumber?: number;
  threadIndex?: number | undefined;
  commentId?: string | undefined;
  reactionText?: string;  // v0.2.0 è¿½åŠ : ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¡¨ç¤ºãƒ†ã‚­ã‚¹ãƒˆï¼ˆä¾‹: "ğŸ‘Ã—2 ğŸ‰Ã—1"ï¼‰
}
```

## ç”»é¢è¨­è¨ˆ

### ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒãƒƒã‚¸è¡¨ç¤º

ã‚³ãƒ¡ãƒ³ãƒˆè¡Œã®æœ«å°¾ã«ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒãƒƒã‚¸ã‚’è¡¨ç¤ºã™ã‚‹ã€‚

```
â”‚  Comments (3):                               â”‚
â”‚  watany: ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’å»¶é•·ã—ã¾ã—ãŸ  ğŸ‘Ã—2     â”‚
â”‚    â”” taro: LGTMã§ã™  ğŸ‰Ã—1                    â”‚
â”‚  hanako: ãƒ†ã‚¹ãƒˆè¿½åŠ ã‚’ãŠé¡˜ã„ã—ã¾ã™             â”‚
â”‚                                              â”‚
â”‚  â†‘â†“ scroll  g react  c comment  q back       â”‚
```

ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚³ãƒ¡ãƒ³ãƒˆã®å ´åˆ:

```
â”‚  src/auth.ts                                 â”‚
â”‚   +   timeout: 10000,                        â”‚
â”‚    ğŸ’¬ taro: ã“ã®å€¤ã¯configã‹ã‚‰å–ã‚‹æ–¹ãŒè‰¯ã•ãã†  ğŸ‘Ã—1 ğŸš€Ã—1â”‚
â”‚                                              â”‚
```

### ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³é¸æŠç”»é¢ï¼ˆ`g` ã‚­ãƒ¼æŠ¼ä¸‹å¾Œï¼‰

ã‚«ãƒ¼ã‚½ãƒ«ãŒã‚³ãƒ¡ãƒ³ãƒˆè¡Œã«ã‚ã‚‹çŠ¶æ…‹ã§ `g` ã‚­ãƒ¼ã‚’æŠ¼ã™ã¨ã€ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ”ãƒƒã‚«ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚

```
â”‚  Comments (3):                               â”‚
â”‚  watany: ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’å»¶é•·ã—ã¾ã—ãŸ  ğŸ‘Ã—2     â”‚
â”‚    â”” taro: LGTMã§ã™  ğŸ‰Ã—1                    â”‚
â”‚ > hanako: ãƒ†ã‚¹ãƒˆè¿½åŠ ã‚’ãŠé¡˜ã„ã—ã¾ã™            â”‚  â† ã‚«ãƒ¼ã‚½ãƒ«ãŒã“ã“ã«ã‚ã‚‹çŠ¶æ…‹ã§ g ã‚­ãƒ¼
â”‚                                              â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  React to comment:                           â”‚
â”‚  > ğŸ‘  ğŸ‘  ğŸ˜„  ğŸ‰  ğŸ˜•  â¤ï¸  ğŸš€  ğŸ‘€           â”‚
â”‚  â†â†’ select  Enter send  Esc cancel           â”‚
```

æ—¢ã«ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒä»˜ã„ã¦ã„ã‚‹çµµæ–‡å­—ã«ã¯ä»¶æ•°ãƒãƒƒã‚¸ã‚’è¡¨ç¤ºï¼ˆã©ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒä»˜ã„ã¦ã„ã‚‹ã‹ä¸€ç›®ã§ã‚ã‹ã‚‹ï¼‰:

```
â”‚  React to comment:                           â”‚
â”‚  > ğŸ‘(2)  ğŸ‘  ğŸ˜„  ğŸ‰  ğŸ˜•  â¤ï¸  ğŸš€  ğŸ‘€        â”‚
â”‚  â†â†’ select  Enter send  Esc cancel           â”‚
```

### ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³é€ä¿¡ä¸­

```
â”‚  Adding reaction...                          â”‚
```

### ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼

```
â”‚  Failed to add reaction: Comment has already â”‚
â”‚  been deleted.                               â”‚
â”‚  Press any key to return                     â”‚
```

### éã‚³ãƒ¡ãƒ³ãƒˆè¡Œã§ã® `g` æ“ä½œ

ã‚«ãƒ¼ã‚½ãƒ«ãŒã‚³ãƒ¡ãƒ³ãƒˆè¡Œä»¥å¤–ï¼ˆdiff è¡Œã€ãƒ˜ãƒƒãƒ€ãƒ¼è¡Œã€ã‚»ãƒ‘ãƒ¬ãƒ¼ã‚¿ãƒ¼è¡Œï¼‰ã«ã‚ã‚‹å ´åˆã€`g` ã‚­ãƒ¼ã¯ä½•ã‚‚ã—ãªã„ï¼ˆç„¡è¦–ã•ã‚Œã‚‹ï¼‰ã€‚

## ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
App (çŠ¶æ…‹ç®¡ç†)
 â”‚
 â”œâ”€ æ—¢å­˜ã® state ã™ã¹ã¦ï¼ˆå¤‰æ›´ãªã—ï¼‰
 â”‚
 â”œâ”€ æ–°è¦ state (v0.2.0):
 â”‚   â”œâ”€ reactionsByComment: ReactionsByComment   // ã‚³ãƒ¡ãƒ³ãƒˆã”ã¨ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±
 â”‚   â”œâ”€ isReacting: boolean                      // ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³é€ä¿¡ä¸­
 â”‚   â””â”€ reactionError: string | null             // ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼
 â”‚
 â””â”€â†’ PullRequestDetail (è¡¨ç¤º + æ“ä½œç®¡ç†)
      â”‚
      â”œâ”€ æ—¢å­˜ã® state ã™ã¹ã¦ï¼ˆå¤‰æ›´ãªã—ï¼‰
      â”‚
      â”œâ”€ æ–°è¦ local state (v0.2.0):
      â”‚   â”œâ”€ isPickingReaction: boolean                    // ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ”ãƒƒã‚«ãƒ¼è¡¨ç¤ºä¸­
      â”‚   â”œâ”€ reactionTarget: { commentId: string } | null  // ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³å¯¾è±¡ã‚³ãƒ¡ãƒ³ãƒˆ
      â”‚   â””â”€ wasReacting: boolean                          // ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Œäº†æ¤œçŸ¥ç”¨
      â”‚
      â”œâ”€ Props ã‹ã‚‰å—ã‘å–ã‚‹ (v0.2.0 è¿½åŠ ):
      â”‚   â”œâ”€ reactionsByComment â”€â”€â†’ ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒãƒƒã‚¸è¡¨ç¤º
      â”‚   â”œâ”€ onReact(commentId, reactionValue) â”€â”€â†’ App.handleReact()
      â”‚   â”œâ”€ isReacting â”€â”€â†’ é€ä¿¡ä¸­è¡¨ç¤º
      â”‚   â”œâ”€ reactionError â”€â”€â†’ ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
      â”‚   â””â”€ onClearReactionError
      â”‚
      â””â”€â†’ ReactionPickerï¼ˆæ–°è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰
           â”‚
           â”œâ”€ local state:
           â”‚   â””â”€ selectedIndex: number  // ãƒ”ãƒƒã‚«ãƒ¼å†…ã®é¸æŠä½ç½®
           â”‚
           â””â”€ çµµæ–‡å­—é¸æŠ UI
```

### ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ /å‰Šé™¤ã‚·ãƒ¼ã‚±ãƒ³ã‚¹

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼          PullRequestDetail   ReactionPicker    App              CodeCommit API
  â”‚                    â”‚                 â”‚              â”‚                    â”‚
  â”‚â”€â”€â”€ g ã‚­ãƒ¼ â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚                 â”‚              â”‚                    â”‚
  â”‚                    â”‚â”€â”€ reactionTargetâ”‚              â”‚                    â”‚
  â”‚                    â”‚   è¨­å®š          â”‚              â”‚                    â”‚
  â”‚                    â”‚â”€â”€ isPickingReaction             â”‚                    â”‚
  â”‚                    â”‚   = true        â”‚              â”‚                    â”‚
  â”‚                    â”‚â”€â”€ render â”€â”€â”€â”€â”€â”€â”€â†’â”‚              â”‚                    â”‚
  â”‚                    â”‚                 â”‚ React to     â”‚                    â”‚
  â”‚                    â”‚                 â”‚ comment:     â”‚                    â”‚
  â”‚                    â”‚                 â”‚ > ğŸ‘ ğŸ‘ ...  â”‚                    â”‚
  â”‚                    â”‚                 â”‚              â”‚                    â”‚
  â”‚â”€â”€â”€ â†â†’ ã§é¸æŠ â”€â”€â”€â”€â†’â”‚                 â”‚              â”‚                    â”‚
  â”‚                    â”‚                 â”‚ é¸æŠä½ç½®æ›´æ–° â”‚                    â”‚
  â”‚                    â”‚                 â”‚              â”‚                    â”‚
  â”‚â”€â”€â”€ Enter â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚                 â”‚              â”‚                    â”‚
  â”‚                    â”‚â† onSelect â”€â”€â”€â”€â”€â”‚              â”‚                    â”‚
  â”‚                    â”‚â”€â”€ onReact(commentId, shortCode)â†’â”‚                    â”‚
  â”‚                    â”‚                 â”‚              â”‚â”€â”€ PutComment â”€â”€â”€â”€â”€â†’â”‚
  â”‚                    â”‚                 â”‚              â”‚   Reaction         â”‚
  â”‚                    â”‚                 â”‚              â”‚â†â”€â”€ HTTP 200 â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                    â”‚                 â”‚              â”‚â”€â”€ reloadReactions  â”‚
  â”‚                    â”‚                 â”‚              â”‚   (è©²å½“ã‚³ãƒ¡ãƒ³ãƒˆ)    â”‚
  â”‚                    â”‚                 â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
  â”‚                    â”‚                 â”‚              â”‚â†â”€â”€ reactions â”€â”€â”€â”€â”€â”€â”‚
  â”‚                    â”‚                 â”‚              â”‚                    â”‚
  â”‚                    â”‚â† isReacting     â”‚              â”‚                    â”‚
  â”‚                    â”‚   = false       â”‚              â”‚                    â”‚
  â”‚                    â”‚â”€â”€ isPickingReaction             â”‚                    â”‚
  â”‚                    â”‚   = false       â”‚              â”‚                    â”‚
```

### ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±ã®å–å¾—ã‚¿ã‚¤ãƒŸãƒ³ã‚°

```
PR è©³ç´°èª­ã¿è¾¼ã¿æ™‚
  â”‚
  â”œâ”€ getPullRequestDetail()        â† æ—¢å­˜
  â”‚   â”œâ”€ fetchCommentThreads()     â† æ—¢å­˜
  â”‚   â””â”€ fetchBlobContents()       â† æ—¢å­˜
  â”‚
  â””â”€ loadReactionsForComments()    â† æ–°è¦
      â”‚
      â””â”€ ã‚³ãƒ¡ãƒ³ãƒˆIDãƒªã‚¹ãƒˆã‚’æŠ½å‡º
          â”‚
          â””â”€ å„ã‚³ãƒ¡ãƒ³ãƒˆã«å¯¾ã—ã¦ GetCommentReactionsCommand ã‚’ä¸¦åˆ—å®Ÿè¡Œ
              â”‚
              â””â”€ ReactionsByComment Map ã‚’æ§‹ç¯‰
```

**ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®**: ã‚³ãƒ¡ãƒ³ãƒˆæ•°ãŒå¤šã„å ´åˆã€`GetCommentReactionsCommand` ã®ä¸¦åˆ—å‘¼ã³å‡ºã—ãŒ API ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆã«æŠµè§¦ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚`Promise.all` ã§ä¸¦åˆ—åŒ–ã™ã‚‹ãŒã€ã‚³ãƒ¡ãƒ³ãƒˆæ•°ãŒ 20 ã‚’è¶…ãˆã‚‹å ´åˆã¯ãƒãƒƒãƒåŒ–ï¼ˆ5 ä»¶ãšã¤ `Promise.all`ï¼‰ã‚’æ¤œè¨ã™ã‚‹ã€‚åˆæœŸå®Ÿè£…ã§ã¯ `Promise.all` ã§ã‚·ãƒ³ãƒ—ãƒ«ã«å®Ÿè£…ã—ã€ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆãŒå•é¡Œã«ãªã£ãŸå ´åˆã«ãƒãƒƒãƒåŒ–ã™ã‚‹ã€‚

## ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ

### å¤‰æ›´å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´å†…å®¹ |
|---------|---------|
| `src/services/codecommit.ts` | `putReaction`, `getReactionsForComment`, `getReactionsForComments` é–¢æ•°ã‚’è¿½åŠ ã€‚æ–°è¦ Command ã® import è¿½åŠ ã€‚`ReactionSummary`, `ReactionsByComment` å‹ã‚’è¿½åŠ  |
| `src/services/codecommit.test.ts` | ä¸Šè¨˜é–¢æ•°ã®ãƒ†ã‚¹ãƒˆè¿½åŠ  |
| `src/components/ReactionPicker.tsx` | **æ–°è¦**: çµµæ–‡å­—é¸æŠã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ |
| `src/components/ReactionPicker.test.tsx` | **æ–°è¦**: ReactionPicker ã®ãƒ†ã‚¹ãƒˆ |
| `src/components/PullRequestDetail.tsx` | `g` ã‚­ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ã€ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒãƒƒã‚¸è¡¨ç¤ºã€ReactionPicker çµ±åˆã€Props è¿½åŠ ã€‚`DisplayLine` ã« `reactionText` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ ã€‚`buildDisplayLines` ã«ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±ã‚’æ¸¡ã™ |
| `src/components/PullRequestDetail.test.tsx` | ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³é–¢é€£ã®ãƒ†ã‚¹ãƒˆè¿½åŠ  |
| `src/app.tsx` | `handleReact` ãƒãƒ³ãƒ‰ãƒ©è¿½åŠ ã€‚state è¿½åŠ ã€‚ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ä¸€æ‹¬å–å¾—ã€‚ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° |
| `src/app.test.tsx` | ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³çµ±åˆãƒ†ã‚¹ãƒˆè¿½åŠ  |
| `src/components/Help.tsx` | `g` ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã®è¿½åŠ  |
| `src/components/Help.test.tsx` | ãƒ†ã‚¹ãƒˆæ›´æ–° |

### 1. ã‚µãƒ¼ãƒ“ã‚¹å±¤ã®å¤‰æ›´

#### å‹å®šç¾©ï¼ˆæ–°è¦ï¼‰

```typescript
// src/services/codecommit.ts ã«è¿½åŠ 

export interface ReactionSummary {
  emoji: string;
  shortCode: string;
  count: number;
  userArns: string[];
}

export type ReactionsByComment = Map<string, ReactionSummary[]>;
```

#### putReactionï¼ˆæ–°è¦ï¼‰

```typescript
import {
  // æ—¢å­˜ã® import ã«è¿½åŠ 
  PutCommentReactionCommand,
  GetCommentReactionsCommand,
} from "@aws-sdk/client-codecommit";

export async function putReaction(
  client: CodeCommitClient,
  params: {
    commentId: string;
    reactionValue: string;
  },
): Promise<void> {
  const command = new PutCommentReactionCommand({
    commentId: params.commentId,
    reactionValue: params.reactionValue,
  });
  await client.send(command);
}
```

**è¨­è¨ˆåˆ¤æ–­**: `PutCommentReactionCommand` ã¯ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒœãƒ‡ã‚£ã‚’è¿”ã•ãªã„ï¼ˆHTTP 200 ã®ã¿ï¼‰ã€‚è¿”ã‚Šå€¤ã¯ `void` ã¨ã—ã€æˆåŠŸ/å¤±æ•—ã®ã¿ã‚’å‘¼ã³å‡ºã—å´ã«ä¼ãˆã‚‹ã€‚

#### getReactionsForCommentï¼ˆæ–°è¦ï¼‰

```typescript
export async function getReactionsForComment(
  client: CodeCommitClient,
  commentId: string,
): Promise<ReactionSummary[]> {
  const command = new GetCommentReactionsCommand({
    commentId,
  });
  const response = await client.send(command);

  return (response.reactionsForComment ?? []).map((r) => ({
    emoji: r.reaction?.emoji ?? "",
    shortCode: r.reaction?.shortCode ?? "",
    count: (r.reactionUsers?.length ?? 0) + (r.reactionsFromDeletedUsersCount ?? 0),
    userArns: r.reactionUsers ?? [],
  }));
}
```

#### getReactionsForCommentsï¼ˆæ–°è¦ï¼‰

è¤‡æ•°ã‚³ãƒ¡ãƒ³ãƒˆã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä¸€æ‹¬å–å¾—ã™ã‚‹ã€‚

```typescript
export async function getReactionsForComments(
  client: CodeCommitClient,
  commentIds: string[],
): Promise<ReactionsByComment> {
  const results: ReactionsByComment = new Map();

  const fetches = commentIds.map(async (commentId) => {
    try {
      const reactions = await getReactionsForComment(client, commentId);
      return { commentId, reactions };
    } catch {
      // å€‹åˆ¥ã®ã‚³ãƒ¡ãƒ³ãƒˆã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã‚‚ä»–ã®ã‚³ãƒ¡ãƒ³ãƒˆã®å–å¾—ã¯ç¶šè¡Œ
      return { commentId, reactions: [] };
    }
  });

  const settled = await Promise.all(fetches);
  for (const { commentId, reactions } of settled) {
    if (reactions.length > 0) {
      results.set(commentId, reactions);
    }
  }

  return results;
}
```

**è¨­è¨ˆåˆ¤æ–­**:
- `GetCommentReactionsCommand` ã¯ã‚³ãƒ¡ãƒ³ãƒˆIDã”ã¨ã«å€‹åˆ¥å‘¼ã³å‡ºã—ãŒå¿…è¦ï¼ˆãƒãƒƒãƒ API ãªã—ï¼‰
- å€‹åˆ¥ã®ã‚¨ãƒ©ãƒ¼ï¼ˆå‰Šé™¤æ¸ˆã¿ã‚³ãƒ¡ãƒ³ãƒˆç­‰ï¼‰ã¯ç„¡è¦–ã—ã€å–å¾—ã§ããŸãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ã¿è¿”ã™
- ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒ 0 ä»¶ã®ã‚³ãƒ¡ãƒ³ãƒˆã¯ Map ã«å«ã‚ãªã„ï¼ˆãƒ¡ãƒ¢ãƒªåŠ¹ç‡ï¼‰

### 2. ReactionPicker ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆæ–°è¦ï¼‰

#### Props

```typescript
// src/components/ReactionPicker.tsx

interface Props {
  onSelect: (shortCode: string) => void;
  onCancel: () => void;
  isProcessing: boolean;
  error: string | null;
  onClearError: () => void;
  currentReactions: ReactionSummary[];  // å¯¾è±¡ã‚³ãƒ¡ãƒ³ãƒˆã®æ—¢å­˜ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±
}
```

**è¨­è¨ˆåˆ¤æ–­**: `currentReactions` ã¯å¯¾è±¡ã‚³ãƒ¡ãƒ³ãƒˆã«æ—¢ã«ä»˜ã„ã¦ã„ã‚‹ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®æƒ…å ±ã§ã‚ã‚Šã€ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ¸ˆã¿ã®çµµæ–‡å­—ã«ä»¶æ•°ãƒãƒƒã‚¸ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã™ã‚‹ã€‚

ãªãŠã€è‡ªåˆ†ãŒãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ¸ˆã¿ã‹ã®åˆ¤å®šï¼ˆ`*` ãƒãƒ¼ã‚«ãƒ¼è¡¨ç¤ºï¼‰ã¯ v0.2.0 ã§ã¯**å®Ÿè£…ã—ãªã„**ã€‚ç†ç”±:
- ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ ARN ã‚’å–å¾—ã™ã‚‹ã«ã¯ `STS:GetCallerIdentity` ã®å‘¼ã³å‡ºã—ãŒå¿…è¦
- æœ€å°ä¾å­˜ã®æ–¹é‡ã«å¾“ã„ã€STS ã¸ã®ä¾å­˜è¿½åŠ ã¯é¿ã‘ã‚‹
- ãƒˆã‚°ãƒ«å‹•ä½œè‡ªä½“ã¯ API ãŒæ­£ã—ãå‡¦ç†ã™ã‚‹ãŸã‚ã€`*` ãƒãƒ¼ã‚«ãƒ¼ãŒãªãã¦ã‚‚æ©Ÿèƒ½çš„ã«ã¯å•é¡Œãªã„
- å°†æ¥ã®æ”¹å–„ã¨ã—ã¦ `currentUserArn` ã‚’ Props ã«è¿½åŠ ã—ã€`*` ãƒãƒ¼ã‚«ãƒ¼è¡¨ç¤ºã‚’å®Ÿè£…å¯èƒ½

#### å®Ÿè£…

```typescript
import { Box, Text, useInput } from "ink";
import React, { useState } from "react";
import type { ReactionSummary } from "../services/codecommit.js";

const REACTIONS = [
  { emoji: "ğŸ‘", shortCode: ":thumbsup:" },
  { emoji: "ğŸ‘", shortCode: ":thumbsdown:" },
  { emoji: "ğŸ˜„", shortCode: ":laugh:" },
  { emoji: "ğŸ‰", shortCode: ":hooray:" },
  { emoji: "ğŸ˜•", shortCode: ":confused:" },
  { emoji: "â¤ï¸", shortCode: ":heart:" },
  { emoji: "ğŸš€", shortCode: ":rocket:" },
  { emoji: "ğŸ‘€", shortCode: ":eyes:" },
] as const;

export { REACTIONS };

export function ReactionPicker({
  onSelect,
  onCancel,
  isProcessing,
  error,
  onClearError,
  currentReactions,
}: Props) {
  const [selectedIndex, setSelectedIndex] = useState(0);

  // æ—¢å­˜ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚·ãƒ§ãƒ¼ãƒˆã‚³ãƒ¼ãƒ‰ â†’ ã‚«ã‚¦ãƒ³ãƒˆ ã®ãƒãƒƒãƒ—ï¼ˆãƒãƒƒã‚¸è¡¨ç¤ºç”¨ï¼‰
  const reactionCounts = new Map<string, number>();
  for (const r of currentReactions) {
    if (r.count > 0) {
      reactionCounts.set(r.shortCode, r.count);
    }
  }

  useInput((input, key) => {
    if (error) {
      onClearError();
      return;
    }

    if (isProcessing) return;

    if (key.escape || input === "q") {
      onCancel();
      return;
    }

    if (key.leftArrow || input === "h") {
      setSelectedIndex((prev) => (prev > 0 ? prev - 1 : REACTIONS.length - 1));
      return;
    }

    if (key.rightArrow || input === "l") {
      setSelectedIndex((prev) => (prev < REACTIONS.length - 1 ? prev + 1 : 0));
      return;
    }

    if (key.return) {
      onSelect(REACTIONS[selectedIndex]!.shortCode);
      return;
    }
  });

  if (error) {
    return (
      <Box flexDirection="column">
        <Text color="red">Failed to add reaction: {error}</Text>
        <Text dimColor>Press any key to return</Text>
      </Box>
    );
  }

  if (isProcessing) {
    return (
      <Box>
        <Text color="cyan">Adding reaction...</Text>
      </Box>
    );
  }

  return (
    <Box flexDirection="column">
      <Text>React to comment:</Text>
      <Box>
        {REACTIONS.map((r, i) => {
          const count = reactionCounts.get(r.shortCode);
          return (
            <Text key={r.shortCode}>
              {i === selectedIndex ? "> " : "  "}
              {r.emoji}
              {count ? `(${count})` : ""}
              {"  "}
            </Text>
          );
        })}
      </Box>
      <Text dimColor>â†â†’ select  Enter send  Esc cancel</Text>
    </Box>
  );
}
```

**è¨­è¨ˆåˆ¤æ–­**:
- `h`/`l` ã‚­ãƒ¼ã‚‚ `â†`/`â†’` ã®ä»£æ›¿ã¨ã—ã¦ä½¿ç”¨å¯èƒ½ï¼ˆVim é¢¨æ“ä½œã®ä¸€è²«æ€§ï¼‰
- ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ä¸€è¦§ã¯å®šæ•°ã¨ã—ã¦å®šç¾©ã—ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã‚µãƒ¼ãƒ“ã‚¹å±¤ã§å…±æœ‰
- ãƒ”ãƒƒã‚«ãƒ¼ã¯å˜ä¸€è¡Œã®æ°´å¹³ãƒªã‚¹ãƒˆã§è¡¨ç¤ºï¼ˆã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã•ã‚’å„ªå…ˆï¼‰
- ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºã¯ ConfirmPrompt ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å€£ã„ã€ä»»æ„ã®ã‚­ãƒ¼å…¥åŠ›ã§ã‚¯ãƒªã‚¢

### 3. PullRequestDetail ã®å¤‰æ›´

#### Props ã®å¤‰æ›´

v0.2.0 ã§ 5 ã¤ã® Props ã‚’è¿½åŠ ã™ã‚‹ã€‚æ—¢å­˜ã® Props ã¯ã™ã¹ã¦ç¶­æŒã€‚

```typescript
interface Props {
  // ... æ—¢å­˜ã® Props ã™ã¹ã¦ ...
  // v0.2.0 è¿½åŠ 
  reactionsByComment: ReactionsByComment;
  onReact: (commentId: string, reactionValue: string) => void;
  isReacting: boolean;
  reactionError: string | null;
  onClearReactionError: () => void;
}
```

#### çŠ¶æ…‹ç®¡ç†ã®è¿½åŠ 

```typescript
const [isPickingReaction, setIsPickingReaction] = useState(false);
const [reactionTarget, setReactionTarget] = useState<{
  commentId: string;
} | null>(null);
const [wasReacting, setWasReacting] = useState(false);
```

#### useEffectï¼ˆãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Œäº†æ¤œçŸ¥ï¼‰

```typescript
// v0.2.0: ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Œäº†ã§ãƒ”ãƒƒã‚«ãƒ¼ã‚’é–‰ã˜ã‚‹
useEffect(() => {
  if (isReacting) {
    setWasReacting(true);
  } else if (wasReacting && !reactionError) {
    setIsPickingReaction(false);
    setReactionTarget(null);
    setWasReacting(false);
  } else {
    setWasReacting(false);
  }
}, [isReacting, reactionError]);
```

#### useInput ã®å¤‰æ›´

```typescript
useInput((input, key) => {
  if (
    isCommenting ||
    isInlineCommenting ||
    isReplying ||
    isEditing ||
    isDeleting ||
    isPickingReaction ||     // v0.2.0 è¿½åŠ 
    approvalAction ||
    mergeStep ||
    isClosing
  )
    return;

  // ... æ—¢å­˜ã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ ...

  if (input === "g") {                                     // v0.2.0 è¿½åŠ 
    if (viewIndex >= 0) return;  // ã‚³ãƒŸãƒƒãƒˆãƒ“ãƒ¥ãƒ¼ã§ã¯ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ä¸å¯
    const currentLine = lines[cursorIndex];
    if (!currentLine) return;
    const target = getReactionTargetFromLine(currentLine);
    if (!target) return;
    setReactionTarget(target);
    setIsPickingReaction(true);
    return;
  }
});
```

#### getReactionTargetFromLineï¼ˆæ–°è¦ãƒ˜ãƒ«ãƒ‘ãƒ¼ï¼‰

```typescript
function getReactionTargetFromLine(line: DisplayLine): { commentId: string } | null {
  const commentTypes = ["inline-comment", "comment", "inline-reply", "comment-reply"];
  if (!commentTypes.includes(line.type)) return null;
  if (!line.commentId) return null;
  return { commentId: line.commentId };
}
```

#### buildDisplayLines ã®å¤‰æ›´

`reactionsByComment` ã‚’å¼•æ•°ã«è¿½åŠ ã—ã€ã‚³ãƒ¡ãƒ³ãƒˆè¡Œã«ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ä»˜ä¸ã™ã‚‹ã€‚

```typescript
function buildDisplayLines(
  differences: Difference[],
  diffTexts: Map<string, { before: string; after: string }>,
  commentThreads: CommentThread[],
  collapsedThreads: Set<number>,
  reactionsByComment: ReactionsByComment,  // v0.2.0 è¿½åŠ 
): DisplayLine[] {
  // ... æ—¢å­˜ã®ãƒ­ã‚¸ãƒƒã‚¯ ...
}
```

#### useMemo å‘¼ã³å‡ºã—ç®‡æ‰€ã®å¤‰æ›´

`buildDisplayLines` ã¯ `useMemo` å†…ã§å‘¼ã°ã‚Œã¦ã„ã‚‹ã€‚`reactionsByComment` ã‚’å¼•æ•°ã¨ä¾å­˜é…åˆ—ã«è¿½åŠ ã™ã‚‹ã€‚

```typescript
const lines = useMemo(() => {
  if (viewIndex === -1) {
    return buildDisplayLines(differences, diffTexts, commentThreads, collapsedThreads, reactionsByComment);
  }
  // ã‚³ãƒŸãƒƒãƒˆãƒ“ãƒ¥ãƒ¼ã§ã¯ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¡¨ç¤ºãªã—ï¼ˆã‚³ãƒ¡ãƒ³ãƒˆãŒè¡¨ç¤ºã•ã‚Œãªã„ãŸã‚ï¼‰
  return buildDisplayLines(commitDifferences, commitDiffTexts, [], new Set(), new Map());
}, [
  viewIndex,
  differences,
  diffTexts,
  commentThreads,
  collapsedThreads,
  reactionsByComment,  // v0.2.0 è¿½åŠ 
  commitDifferences,
  commitDiffTexts,
]);
```

#### appendThreadLines ã®å¤‰æ›´

ã‚³ãƒ¡ãƒ³ãƒˆè¡Œã®ç”Ÿæˆæ™‚ã«ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ä»˜ä¸ã™ã‚‹ã€‚

```typescript
function appendThreadLines(
  lines: DisplayLine[],
  thread: CommentThread,
  threadIndex: number,
  collapsedThreads: Set<number>,
  mode: "inline" | "general",
  reactionsByComment: ReactionsByComment,  // v0.2.0 è¿½åŠ 
): void {
  // ... æ—¢å­˜ã®ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆrootComment ã®å‡¦ç†ï¼‰...

  const rootReactions = reactionsByComment.get(rootComment.commentId ?? "");
  const rootReactionText = formatReactionBadge(rootReactions);

  if (mode === "inline") {
    lines.push({
      type: "inline-comment",
      text: `ğŸ’¬ ${rootAuthor}: ${rootContent}`,
      threadIndex,
      commentId: rootComment.commentId,
      reactionText: rootReactionText,  // v0.2.0 è¿½åŠ 
    });
  } else {
    lines.push({
      type: "comment",
      text: `${rootAuthor}: ${rootContent}`,
      threadIndex,
      commentId: rootComment.commentId,
      reactionText: rootReactionText,  // v0.2.0 è¿½åŠ 
    });
  }

  // ... è¿”ä¿¡ã®ãƒ«ãƒ¼ãƒ—å†…ã§ã‚‚åŒæ§˜ã«ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±ã‚’ä»˜ä¸ ...
  for (const reply of replies) {
    const replyReactions = reactionsByComment.get(reply.commentId ?? "");
    const replyReactionText = formatReactionBadge(replyReactions);

    // lines.push ã« reactionText ã‚’è¿½åŠ 
  }
}
```

#### formatReactionBadgeï¼ˆæ–°è¦ãƒ˜ãƒ«ãƒ‘ãƒ¼ï¼‰

ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±ã‚’ãƒãƒƒã‚¸æ–‡å­—åˆ—ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã™ã‚‹ã€‚

```typescript
function formatReactionBadge(reactions: ReactionSummary[] | undefined): string {
  if (!reactions || reactions.length === 0) return "";
  return reactions
    .filter((r) => r.count > 0)
    .map((r) => `${r.emoji}Ã—${r.count}`)
    .join(" ");
}
```

#### renderDiffLine ã®å¤‰æ›´

ã‚³ãƒ¡ãƒ³ãƒˆè¡Œã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã«ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒãƒƒã‚¸ã‚’è¿½åŠ ã™ã‚‹ã€‚

```typescript
function renderDiffLine(line: DisplayLine, isCursor = false): React.ReactNode {
  // ... æ—¢å­˜ã® switch æ–‡ ...

  case "comment":
    return (
      <Text>
        {" "}{line.text}
        {line.reactionText ? <Text dimColor>  {line.reactionText}</Text> : null}
      </Text>
    );
  case "inline-comment":
    return (
      <Text color="magenta">
        {" "}{line.text}
        {line.reactionText ? <Text dimColor>  {line.reactionText}</Text> : null}
      </Text>
    );
  case "inline-reply":
    return (
      <Text color="magenta">
        {"   "}{line.text}
        {line.reactionText ? <Text dimColor>  {line.reactionText}</Text> : null}
      </Text>
    );
  case "comment-reply":
    return (
      <Text>
        {"   "}{line.text}
        {line.reactionText ? <Text dimColor>  {line.reactionText}</Text> : null}
      </Text>
    );
  // ä»–ã® caseï¼ˆheader, separator, add, delete, context, comment-header, fold-indicatorï¼‰ã¯å¤‰æ›´ãªã—
}
```

#### ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®å¤‰æ›´

```tsx
{/* ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ”ãƒƒã‚«ãƒ¼ */}
{isPickingReaction && reactionTarget && (
  <ReactionPicker
    onSelect={(shortCode) => onReact(reactionTarget.commentId, shortCode)}
    onCancel={() => {
      setIsPickingReaction(false);
      setReactionTarget(null);
      onClearReactionError();
    }}
    isProcessing={isReacting}
    error={reactionError}
    onClearError={() => {
      onClearReactionError();
      setIsPickingReaction(false);
      setReactionTarget(null);
    }}
    currentReactions={reactionsByComment.get(reactionTarget.commentId) ?? []}
  />
)}
```

#### visibleLineCount ã®èª¿æ•´

```typescript
const visibleLineCount =
  isCommenting ||
  isInlineCommenting ||
  isReplying ||
  isEditing ||
  isDeleting ||
  isPickingReaction ||     // v0.2.0 è¿½åŠ 
  approvalAction ||
  mergeStep ||
  isClosing
    ? 20
    : 30;
```

#### ãƒ•ãƒƒã‚¿ãƒ¼ã®å¤‰æ›´

```tsx
<Box marginTop={1}>
  <Text dimColor>
    {isCommenting || isInlineCommenting || isReplying || isEditing || isDeleting ||
    isPickingReaction || approvalAction || mergeStep || isClosing
      ? ""
      : viewIndex === -1 && commits.length > 0
        ? "Tab switch view  â†‘â†“ cursor  c comment  C inline  R reply  o fold  e edit  d delete  g react  a approve  r revoke  m merge  x close  q back  ? help"
        : viewIndex >= 0
          ? "Tab next  S-Tab prev  â†‘â†“ cursor  e edit  d delete  a approve  r revoke  m merge  x close  q back  ? help"
          : "â†‘â†“ cursor  c comment  C inline  R reply  o fold  e edit  d delete  g react  a approve  r revoke  m merge  x close  q back  ? help"}
  </Text>
</Box>
```

### 4. App ã®å¤‰æ›´

#### import ã®å¤‰æ›´

```typescript
import {
  // æ—¢å­˜ã® import ã«è¿½åŠ 
  putReaction,
  getReactionsForComment,
  getReactionsForComments,
  type ReactionsByComment,
} from "./services/codecommit.js";
```

**æ³¨æ„**: `getReactionsForComment`ï¼ˆå˜æ•°å½¢ï¼‰ã¯ `reloadReactionForComment` ã§ä½¿ç”¨ã™ã‚‹ã€‚`getReactionsForComments`ï¼ˆè¤‡æ•°å½¢ï¼‰ã¯ `loadPullRequestDetail` ã¨ `reloadComments` ã§ä½¿ç”¨ã™ã‚‹ã€‚

#### state ã®è¿½åŠ 

```typescript
// v0.2.0: ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³çŠ¶æ…‹
const [reactionsByComment, setReactionsByComment] = useState<ReactionsByComment>(new Map());
const [isReacting, setIsReacting] = useState(false);
const [reactionError, setReactionError] = useState<string | null>(null);
```

#### loadPullRequestDetail ã®å¤‰æ›´

PR è©³ç´°èª­ã¿è¾¼ã¿æ™‚ã«ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±ã‚‚å–å¾—ã™ã‚‹ã€‚

```typescript
async function loadPullRequestDetail(pullRequestId: string) {
  await withLoadingState(async () => {
    const detail = await getPullRequestDetail(client, pullRequestId, selectedRepo);
    // ... æ—¢å­˜ã®å‡¦ç† ...

    // v0.2.0: ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±ã‚’å–å¾—
    const allCommentIds = detail.commentThreads.flatMap((thread) =>
      thread.comments
        .filter((c) => c.commentId)
        .map((c) => c.commentId!),
    );
    if (allCommentIds.length > 0) {
      const reactions = await getReactionsForComments(client, allCommentIds);
      setReactionsByComment(reactions);
    } else {
      setReactionsByComment(new Map());
    }
  });
}
```

#### handleReactï¼ˆæ–°è¦ï¼‰

```typescript
async function handleReact(commentId: string, reactionValue: string) {
  setIsReacting(true);
  setReactionError(null);
  try {
    await putReaction(client, { commentId, reactionValue });
    // ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³å¾Œã€è©²å½“ã‚³ãƒ¡ãƒ³ãƒˆã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±ã®ã¿ãƒªãƒ­ãƒ¼ãƒ‰
    await reloadReactionForComment(commentId);
  } catch (err) {
    setReactionError(formatReactionError(err));
  } finally {
    setIsReacting(false);
  }
}
```

#### reloadReactionForCommentï¼ˆæ–°è¦ï¼‰

å˜ä¸€ã‚³ãƒ¡ãƒ³ãƒˆã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã€‚å…¨ã‚³ãƒ¡ãƒ³ãƒˆã®å†å–å¾—ã¯ä¸è¦ã€‚

```typescript
async function reloadReactionForComment(commentId: string) {
  try {
    const reactions = await getReactionsForComment(client, commentId);
    setReactionsByComment((prev) => {
      const next = new Map(prev);
      if (reactions.length > 0) {
        next.set(commentId, reactions);
      } else {
        next.delete(commentId);
      }
      return next;
    });
  } catch {
    // ãƒªãƒ­ãƒ¼ãƒ‰å¤±æ•—ã¯ç„¡è¦–ï¼ˆæ¬¡ã®è¡¨ç¤ºæ›´æ–°ã§è§£æ¶ˆã•ã‚Œã‚‹ï¼‰
  }
}
```

**è¨­è¨ˆåˆ¤æ–­**: ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ /å‰Šé™¤å¾Œã¯ã€å¯¾è±¡ã‚³ãƒ¡ãƒ³ãƒˆã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±ã®ã¿ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã€‚å…¨ã‚³ãƒ¡ãƒ³ãƒˆã®å†å–å¾—ã¯ API å‘¼ã³å‡ºã—æ•°ãŒå¤šã™ãã‚‹ãŸã‚ä¸æ¡ç”¨ã€‚

#### reloadComments ã®å¤‰æ›´

ã‚³ãƒ¡ãƒ³ãƒˆãƒªãƒ­ãƒ¼ãƒ‰æ™‚ã«ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±ã‚‚ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã€‚

```typescript
async function reloadComments(pullRequestId: string) {
  // æ—¢å­˜ã®å‡¦ç†
  const target = prDetail?.pullRequestTargets?.[0];
  const threads = await getComments(client, pullRequestId, {
    repositoryName: selectedRepo,
    ...(target?.sourceCommit && target?.destinationCommit
      ? {
          afterCommitId: target.sourceCommit,
          beforeCommitId: target.destinationCommit,
        }
      : {}),
  });
  setCommentThreads(threads);

  // v0.2.0: ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±ã‚‚ãƒªãƒ­ãƒ¼ãƒ‰
  const allCommentIds = threads.flatMap((thread) =>
    thread.comments
      .filter((c) => c.commentId)
      .map((c) => c.commentId!),
  );
  if (allCommentIds.length > 0) {
    const reactions = await getReactionsForComments(client, allCommentIds);
    setReactionsByComment(reactions);
  } else {
    setReactionsByComment(new Map());
  }
}
```

#### formatErrorMessage ã®æ‹¡å¼µ

```typescript
function formatErrorMessage(
  err: unknown,
  context?: "comment" | "reply" | "approval" | "merge" | "close" | "edit" | "delete" | "reaction",
  approvalAction?: "approve" | "revoke",
): string {
  // ... æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ ...

  // Reaction-specific errors (v0.2.0)
  if (context === "reaction") {
    if (name === "CommentDeletedException") {
      return "Comment has already been deleted.";
    }
    if (name === "CommentDoesNotExistException") {
      return "Comment not found.";
    }
    if (name === "InvalidReactionValueException") {
      return "Invalid reaction value.";
    }
    if (name === "InvalidCommentIdException") {
      return "Invalid comment ID format.";
    }
  }

  // ... æ—¢å­˜ã® General AWS errors ...
}
```

#### Context-specific wrapperï¼ˆè¿½åŠ ï¼‰

```typescript
function formatReactionError(err: unknown): string {
  return formatErrorMessage(err, "reaction");
}
```

#### PullRequestDetail ã¸ã® Props æ¸¡ã—

```tsx
case "detail":
  if (!prDetail) return null;
  return (
    <PullRequestDetail
      // ... æ—¢å­˜ã® Props ã™ã¹ã¦ ...
      reactionsByComment={reactionsByComment}                  // v0.2.0 è¿½åŠ 
      onReact={handleReact}                                    // v0.2.0 è¿½åŠ 
      isReacting={isReacting}                                  // v0.2.0 è¿½åŠ 
      reactionError={reactionError}                            // v0.2.0 è¿½åŠ 
      onClearReactionError={() => setReactionError(null)}      // v0.2.0 è¿½åŠ 
    />
  );
```

### 5. Help ã®å¤‰æ›´

```typescript
<Text> c          Post comment (PR Detail)</Text>
<Text> C          Post inline comment (PR Detail)</Text>
<Text> R          Reply to comment (PR Detail)</Text>
<Text> o          Toggle thread fold (PR Detail)</Text>
<Text> e          Edit comment (PR Detail)</Text>
<Text> d          Delete comment (PR Detail)</Text>
<Text> g          React to comment (PR Detail)</Text>    // v0.2.0 è¿½åŠ 
<Text> a          Approve PR (PR Detail)</Text>
<Text> r          Revoke approval (PR Detail)</Text>
<Text> m          Merge PR (PR Detail)</Text>
<Text> x          Close PR without merge (PR Detail)</Text>
```

## ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ä¸€è¦§ï¼ˆæ›´æ–°å¾Œï¼‰

| ã‚­ãƒ¼ | å‹•ä½œ | ç”»é¢ |
|------|------|------|
| `j` / `â†“` | ã‚«ãƒ¼ã‚½ãƒ«ä¸‹ç§»å‹• | å…¨ç”»é¢ï¼ˆå…¥åŠ›ä¸­ãƒ»ç¢ºèªä¸­ã¯ç„¡åŠ¹ï¼‰ |
| `k` / `â†‘` | ã‚«ãƒ¼ã‚½ãƒ«ä¸Šç§»å‹• | å…¨ç”»é¢ï¼ˆå…¥åŠ›ä¸­ãƒ»ç¢ºèªä¸­ã¯ç„¡åŠ¹ï¼‰ |
| `Enter` | é¸æŠãƒ»æ±ºå®š / ã‚³ãƒ¡ãƒ³ãƒˆé€ä¿¡ / ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³é€ä¿¡ | ãƒªã‚¹ãƒˆç”»é¢ / ã‚³ãƒ¡ãƒ³ãƒˆå…¥åŠ› / ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ”ãƒƒã‚«ãƒ¼ |
| `q` / `Esc` | å‰ã®ç”»é¢ã«æˆ»ã‚‹ / ã‚­ãƒ£ãƒ³ã‚»ãƒ« | å…¨ç”»é¢ / å„ãƒ¢ãƒ¼ãƒ€ãƒ« |
| `Ctrl+C` | å³åº§ã«çµ‚äº† | å…¨ç”»é¢ |
| `?` | ãƒ˜ãƒ«ãƒ—è¡¨ç¤º | å…¨ç”»é¢ï¼ˆå…¥åŠ›ä¸­ãƒ»ç¢ºèªä¸­ã¯ç„¡åŠ¹ï¼‰ |
| `c` | ä¸€èˆ¬ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿ | PR è©³ç´°ç”»é¢ |
| `C` | ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿ï¼ˆã‚«ãƒ¼ã‚½ãƒ«è¡Œï¼‰ | PR è©³ç´°ç”»é¢ï¼ˆdiff è¡Œä¸Šã®ã¿ï¼‰ |
| `R` | ã‚³ãƒ¡ãƒ³ãƒˆè¿”ä¿¡ | PR è©³ç´°ç”»é¢ï¼ˆã‚³ãƒ¡ãƒ³ãƒˆè¡Œä¸Šã®ã¿ï¼‰ |
| `o` | ã‚¹ãƒ¬ãƒƒãƒ‰æŠ˜ã‚ŠãŸãŸã¿/å±•é–‹ | PR è©³ç´°ç”»é¢ï¼ˆã‚³ãƒ¡ãƒ³ãƒˆè¡Œä¸Šã®ã¿ï¼‰ |
| `e` | ã‚³ãƒ¡ãƒ³ãƒˆç·¨é›† | PR è©³ç´°ç”»é¢ï¼ˆã‚³ãƒ¡ãƒ³ãƒˆè¡Œä¸Šã®ã¿ï¼‰ |
| `d` | ã‚³ãƒ¡ãƒ³ãƒˆå‰Šé™¤ï¼ˆç¢ºèªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼‰ | PR è©³ç´°ç”»é¢ï¼ˆã‚³ãƒ¡ãƒ³ãƒˆè¡Œä¸Šã®ã¿ï¼‰ |
| `g` | ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ /å‰Šé™¤ | PR è©³ç´°ç”»é¢ï¼ˆã‚³ãƒ¡ãƒ³ãƒˆè¡Œä¸Šã®ã¿ï¼‰ |
| `â†` / `h` | ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³é¸æŠã‚’å·¦ã¸ | ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ”ãƒƒã‚«ãƒ¼ |
| `â†’` / `l` | ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³é¸æŠã‚’å³ã¸ | ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ”ãƒƒã‚«ãƒ¼ |
| `a` | PR ã‚’æ‰¿èªï¼ˆç¢ºèªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¡¨ç¤ºï¼‰ | PR è©³ç´°ç”»é¢ |
| `r` | æ‰¿èªã‚’å–ã‚Šæ¶ˆã—ï¼ˆç¢ºèªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¡¨ç¤ºï¼‰ | PR è©³ç´°ç”»é¢ |
| `m` | PR ã‚’ãƒãƒ¼ã‚¸ï¼ˆæˆ¦ç•¥é¸æŠ â†’ ç¢ºèªï¼‰ | PR è©³ç´°ç”»é¢ |
| `x` | PR ã‚’ã‚¯ãƒ­ãƒ¼ã‚ºï¼ˆç¢ºèªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¡¨ç¤ºï¼‰ | PR è©³ç´°ç”»é¢ |

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼

| ã‚¨ãƒ©ãƒ¼ | è¡¨ç¤ºãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ |
|--------|---------------|
| `CommentDeletedException` | "Comment has already been deleted." |
| `CommentDoesNotExistException` | "Comment not found." |
| `InvalidReactionValueException` | "Invalid reaction value." |
| `InvalidCommentIdException` | "Invalid comment ID format." |
| `AccessDeniedException` / `UnauthorizedException` | "Access denied. Check your IAM policy." |
| ãã®ä»– | ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚µãƒ‹ã‚¿ã‚¤ã‚ºã—ã¦è¡¨ç¤º |

### ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã¨å¯¾å‡¦æ–¹é‡

| ã‚±ãƒ¼ã‚¹ | å¯¾å‡¦ |
|--------|------|
| ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ”ãƒƒã‚«ãƒ¼è¡¨ç¤ºä¸­ã« `c` / `C` / `R` / `e` / `d` / `a` / `r` / `m` / `x` | `isPickingReaction` ãƒã‚§ãƒƒã‚¯ã«ã‚ˆã‚Šç„¡åŠ¹åŒ– |
| ä»–ã®ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤ºä¸­ã« `g` | å„ãƒ¢ãƒ¼ãƒ‰ã®æ’ä»–ãƒã‚§ãƒƒã‚¯ã«ã‚ˆã‚Šç„¡åŠ¹åŒ– |
| éã‚³ãƒ¡ãƒ³ãƒˆè¡Œã§ `g` | `getReactionTargetFromLine` ãŒ `null` ã‚’è¿”ã—ã€ä½•ã‚‚ã—ãªã„ |
| æŠ˜ã‚ŠãŸãŸã¿ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼è¡Œï¼ˆ`fold-indicator`ï¼‰ã§ `g` | `commentId` ãŒãªã„ãŸã‚ `null` ã‚’è¿”ã—ã€ä½•ã‚‚ã—ãªã„ |
| å‰Šé™¤æ¸ˆã¿ã‚³ãƒ¡ãƒ³ãƒˆã¸ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ | API ãŒ `CommentDeletedException` ã‚’è¿”ã—ã€ã‚¨ãƒ©ãƒ¼è¡¨ç¤º |
| å­˜åœ¨ã—ãªã„ã‚³ãƒ¡ãƒ³ãƒˆã¸ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ | API ãŒ `CommentDoesNotExistException` ã‚’è¿”ã—ã€ã‚¨ãƒ©ãƒ¼è¡¨ç¤º |
| åŒã˜ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®å†é€ä¿¡ | API ã®ãƒˆã‚°ãƒ«å‹•ä½œã«ã‚ˆã‚Šå‰Šé™¤ã•ã‚Œã‚‹ï¼ˆæ­£å¸¸ãƒ•ãƒ­ãƒ¼ï¼‰ |
| ã‚³ãƒ¡ãƒ³ãƒˆæ•°ãŒéå¸¸ã«å¤šã„å ´åˆ | `getReactionsForComments` ãŒ `Promise.all` ã§ä¸¦åˆ—å–å¾—ã€‚ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆç™ºç”Ÿæ™‚ã¯å€‹åˆ¥ã‚¨ãƒ©ãƒ¼ã‚’ç„¡è¦–ã—ã¦å–å¾—å¯èƒ½åˆ†ã®ã¿è¡¨ç¤º |
| ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³é€ä¿¡ä¸­ã« Esc | `isProcessing` ãƒã‚§ãƒƒã‚¯ã«ã‚ˆã‚Šå…¥åŠ›ãŒç„¡åŠ¹åŒ–ã•ã‚Œã‚‹ãŸã‚ã€ã‚­ãƒ£ãƒ³ã‚»ãƒ«ä¸å¯ |
| ã‚³ãƒŸãƒƒãƒˆãƒ“ãƒ¥ãƒ¼ï¼ˆviewIndex >= 0ï¼‰ã§ `g` | `viewIndex >= 0` ãƒã‚§ãƒƒã‚¯ã«ã‚ˆã‚Šç„¡è¦– |
| ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±ã®å–å¾—å¤±æ•—ï¼ˆPR è©³ç´°èª­ã¿è¾¼ã¿æ™‚ï¼‰ | è©²å½“ã‚³ãƒ¡ãƒ³ãƒˆã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯ç©ºã¨ã—ã¦è¡¨ç¤ºï¼ˆã‚¨ãƒ©ãƒ¼ã¯ç™ºç”Ÿã•ã›ãªã„ï¼‰ |

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®

### IAM æ¨©é™

v0.2.0 ã§è¿½åŠ ã® IAM æ¨©é™ãŒå¿…è¦:

```json
{
  "Effect": "Allow",
  "Action": [
    "codecommit:PutCommentReaction",
    "codecommit:GetCommentReactions"
  ],
  "Resource": "arn:aws:codecommit:<region>:<account-id>:<repository-name>"
}
```

### æ“ä½œã®å®‰å…¨æ€§

#### ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ 

- **API ãƒ¬ãƒ™ãƒ«ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ¶é™**: `PutCommentReaction` ã¯å‘¼ã³å‡ºã—å…ƒãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ã¿æ“ä½œå¯èƒ½ã€‚ä»–äººã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯è¿½åŠ ãƒ»å‰Šé™¤ä¸å¯
- **ãƒˆã‚°ãƒ«å‹•ä½œ**: åŒã˜ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å†é€ä¿¡ã™ã‚‹ã¨å‰Šé™¤ã•ã‚Œã‚‹ã€‚æ„å›³ã—ãªã„æ“ä½œãŒã‚ã£ã¦ã‚‚å†åº¦é€ä¿¡ã™ã‚Œã°å…ƒã«æˆ»ã›ã‚‹
- **ç¢ºèªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãªã—**: ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯è»½é‡ãªæ“ä½œã§ã‚ã‚Šã€ãƒˆã‚°ãƒ«ã§å…ƒã«æˆ»ã›ã‚‹ãŸã‚ç¢ºèªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¯ä¸è¦

#### ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¡¨ç¤º

- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ ARN ã®ã‚µãƒ‹ã‚¿ã‚¤ã‚º**: `reactionUsers` ã® ARN ã¯ãƒãƒƒã‚¸è¡¨ç¤ºã«ã¯ä½¿ç”¨ã—ãªã„ï¼ˆã‚«ã‚¦ãƒ³ãƒˆã®ã¿è¡¨ç¤ºï¼‰ã€‚å°†æ¥çš„ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹å ´åˆã¯ `extractAuthorName` ã§ã‚µãƒ‹ã‚¿ã‚¤ã‚º

### èªè¨¼

æ—¢å­˜ã® AWS SDK æ¨™æº–èªè¨¼ãƒã‚§ãƒ¼ãƒ³ã‚’ãã®ã¾ã¾ä½¿ç”¨ã™ã‚‹ã€‚è¿½åŠ ã®èªè¨¼ãƒ•ãƒ­ãƒ¼ã¯ä¸è¦ã€‚

## æŠ€è¡“é¸å®š

### æ–°è¦ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸: ãªã—

v0.2.0 ã§ã¯æ–°è¦ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®è¿½åŠ ã¯ä¸è¦ã€‚`PutCommentReactionCommand` ã¨ `GetCommentReactionsCommand` ã¯æ—¢å­˜ã® `@aws-sdk/client-codecommit` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«å«ã¾ã‚Œã¦ã„ã‚‹ã€‚

### ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±ã®ç®¡ç†: ç‹¬ç«‹ã—ãŸ Map vs CommentThread å†…

| é¸æŠè‚¢ | è©•ä¾¡ |
|--------|------|
| **ç‹¬ç«‹ã—ãŸ `ReactionsByComment` Mapï¼ˆæ¡ç”¨ï¼‰** | ã‚³ãƒ¡ãƒ³ãƒˆã‚¹ãƒ¬ãƒƒãƒ‰ã®ãƒªãƒ­ãƒ¼ãƒ‰ã¨ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒªãƒ­ãƒ¼ãƒ‰ã‚’ç‹¬ç«‹ã—ã¦ç®¡ç†å¯èƒ½ã€‚å˜ä¸€ã‚³ãƒ¡ãƒ³ãƒˆã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ›´æ–°ãŒåŠ¹ç‡çš„ã€‚`GetCommentsForPullRequest` API ã«ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±ãŒå«ã¾ã‚Œãªã„ãŸã‚è‡ªç„¶ãªåˆ†é›¢ |
| `CommentThread` ã«ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±ã‚’å«ã‚ã‚‹ | `GetCommentsForPullRequest` ãŒãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±ã‚’è¿”ã•ãªã„ãŸã‚ã€ãƒªãƒ­ãƒ¼ãƒ‰æ™‚ã«æ¯å›ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚‚å†å–å¾—ãŒå¿…è¦ã€‚ã‚³ãƒ¡ãƒ³ãƒˆã‚¹ãƒ¬ãƒƒãƒ‰ã®æ›´æ–°ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒåˆ¶ç´„ã•ã‚Œã‚‹ |

### ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³å–å¾—: ä¸¦åˆ— vs ãƒãƒƒãƒ

| é¸æŠè‚¢ | è©•ä¾¡ |
|--------|------|
| **`Promise.all` ã§ä¸¦åˆ—å–å¾—ï¼ˆæ¡ç”¨ï¼‰** | ã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…ã€‚ã‚³ãƒ¡ãƒ³ãƒˆæ•°ãŒå°‘ãªã„å ´åˆã¯æœ€ã‚‚é«˜é€Ÿã€‚CodeCommit API ã«ãƒãƒƒãƒå–å¾— API ãŒãªã„ãŸã‚ã€ä¸¦åˆ—å‘¼ã³å‡ºã—ãŒå”¯ä¸€ã®æ–¹æ³• |
| é€æ¬¡å–å¾— | ã‚³ãƒ¡ãƒ³ãƒˆæ•°ã«æ¯”ä¾‹ã—ã¦ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ãŒå¢—åŠ ã€‚UX ãŒæ‚ªåŒ– |
| ãƒãƒƒãƒåŒ–ï¼ˆ5ä»¶ãšã¤ `Promise.all`ï¼‰ | ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆå¯¾ç­–ã¨ã—ã¦æœ‰åŠ¹ã ãŒã€åˆæœŸå®Ÿè£…ã§ã¯éå‰°ã€‚å•é¡Œç™ºç”Ÿæ™‚ã«å°å…¥ |

### ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ”ãƒƒã‚«ãƒ¼ã®UI: æ°´å¹³ãƒªã‚¹ãƒˆ vs æ ¼å­

| é¸æŠè‚¢ | è©•ä¾¡ |
|--------|------|
| **æ°´å¹³ãƒªã‚¹ãƒˆï¼ˆæ¡ç”¨ï¼‰** | 8 ç¨®é¡ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãªã‚‰ 1 è¡Œã§è¡¨ç¤ºå¯èƒ½ã€‚`â†`/`â†’` ã§ç›´æ„Ÿçš„ã«é¸æŠã€‚å®Ÿè£…ãŒã‚·ãƒ³ãƒ—ãƒ« |
| 2è¡ŒÃ—4åˆ—ã®æ ¼å­ | ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãŒ `â†‘â†“â†â†’` ã® 4 æ–¹å‘ã«ãªã‚Šè¤‡é›‘ã€‚8 ç¨®é¡ã§ã¯æ ¼å­ã®ãƒ¡ãƒªãƒƒãƒˆãŒè–„ã„ |

### ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³å¾Œã®ãƒªãƒ­ãƒ¼ãƒ‰ç¯„å›²: å¯¾è±¡ã‚³ãƒ¡ãƒ³ãƒˆã®ã¿ vs å…¨ã‚³ãƒ¡ãƒ³ãƒˆ

| é¸æŠè‚¢ | è©•ä¾¡ |
|--------|------|
| **å¯¾è±¡ã‚³ãƒ¡ãƒ³ãƒˆã®ã¿ãƒªãƒ­ãƒ¼ãƒ‰ï¼ˆæ¡ç”¨ï¼‰** | API å‘¼ã³å‡ºã—ãŒ 1 å›ã§æ¸ˆã‚€ã€‚ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒé«˜é€Ÿã€‚ä»–ã®ã‚³ãƒ¡ãƒ³ãƒˆã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³çŠ¶æ…‹ã«å½±éŸ¿ã—ãªã„ |
| å…¨ã‚³ãƒ¡ãƒ³ãƒˆã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ | ã‚³ãƒ¡ãƒ³ãƒˆæ•°åˆ†ã® API å‘¼ã³å‡ºã—ãŒç™ºç”Ÿã€‚ä¸å¿…è¦ã«é…ã„ |

## ãƒ†ã‚¹ãƒˆæ–¹é‡

### ãƒ†ã‚¹ãƒˆå¯¾è±¡ã¨æ–¹é‡

| ãƒ†ã‚¹ãƒˆå¯¾è±¡ | æ–¹é‡ |
|-----------|------|
| `putReaction` | `vi.fn()` ã§ `client.send` ã‚’ãƒ¢ãƒƒã‚¯ã€‚æ­£å¸¸ç³»ãƒ»ã‚¨ãƒ©ãƒ¼ç³»ã®ãƒ†ã‚¹ãƒˆ |
| `getReactionsForComment` | `vi.fn()` ã§ `client.send` ã‚’ãƒ¢ãƒƒã‚¯ã€‚ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³é›†ç´„ã®ãƒ†ã‚¹ãƒˆ |
| `getReactionsForComments` | è¤‡æ•°ã‚³ãƒ¡ãƒ³ãƒˆã®ä¸¦åˆ—å–å¾—ãƒ†ã‚¹ãƒˆã€‚å€‹åˆ¥ã‚¨ãƒ©ãƒ¼æ™‚ã®ç¶™ç¶šãƒ†ã‚¹ãƒˆ |
| `ReactionPicker` | é¸æŠãƒ»é€ä¿¡ãƒ»ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã® UI ãƒ†ã‚¹ãƒˆ |
| `PullRequestDetail`ï¼ˆ`g` ã‚­ãƒ¼ï¼‰ | ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³å¯¾è±¡ã®ç‰¹å®š â†’ ãƒ”ãƒƒã‚«ãƒ¼è¡¨ç¤º â†’ é€ä¿¡ã®æµã‚Œ |
| `PullRequestDetail`ï¼ˆãƒãƒƒã‚¸è¡¨ç¤ºï¼‰ | ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±ãŒã‚³ãƒ¡ãƒ³ãƒˆè¡Œã«æ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ãƒ†ã‚¹ãƒˆ |
| `App`ï¼ˆçµ±åˆãƒ†ã‚¹ãƒˆï¼‰ | ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æˆåŠŸâ†’ãƒªãƒ­ãƒ¼ãƒ‰ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° |

ã‚«ãƒãƒ¬ãƒƒã‚¸ 95% ä»¥ä¸Šã‚’ç¶­æŒã™ã‚‹ã€‚

### å…·ä½“çš„ãªãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

#### ã‚µãƒ¼ãƒ“ã‚¹å±¤

| # | ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ | æœŸå¾…çµæœ |
|---|-------------|---------|
| 1 | `putReaction`: æ­£å¸¸é€ä¿¡ | `PutCommentReactionCommand` ãŒæ­£ã—ã„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§å‘¼ã°ã‚Œã‚‹ |
| 2 | `putReaction`: API ãŒã‚¨ãƒ©ãƒ¼ã‚’ã‚¹ãƒ­ãƒ¼ | ã‚¨ãƒ©ãƒ¼ãŒãã®ã¾ã¾ä¸Šä½ã«ä¼æ’­ã™ã‚‹ |
| 3 | `getReactionsForComment`: ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚ã‚Š | `ReactionSummary[]` ãŒæ­£ã—ãé›†ç´„ã•ã‚Œã‚‹ |
| 4 | `getReactionsForComment`: ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãªã— | ç©ºé…åˆ—ãŒè¿”ã‚‹ |
| 5 | `getReactionsForComment`: å‰Šé™¤ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚«ã‚¦ãƒ³ãƒˆ | `count` ã«å‰Šé™¤ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ•°ãŒå«ã¾ã‚Œã‚‹ |
| 6 | `getReactionsForComment`: API ãŒã‚¨ãƒ©ãƒ¼ã‚’ã‚¹ãƒ­ãƒ¼ | ã‚¨ãƒ©ãƒ¼ãŒãã®ã¾ã¾ä¸Šä½ã«ä¼æ’­ã™ã‚‹ |
| 7 | `getReactionsForComments`: è¤‡æ•°ã‚³ãƒ¡ãƒ³ãƒˆã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³å–å¾— | å„ã‚³ãƒ¡ãƒ³ãƒˆã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒæ­£ã—ã Map ã«æ ¼ç´ã•ã‚Œã‚‹ |
| 8 | `getReactionsForComments`: ä¸€éƒ¨ã‚³ãƒ¡ãƒ³ãƒˆã§ã‚¨ãƒ©ãƒ¼ | ã‚¨ãƒ©ãƒ¼ã®ã‚³ãƒ¡ãƒ³ãƒˆã¯ç©ºã¨ã—ã¦æ‰±ã„ã€ä»–ã®ã‚³ãƒ¡ãƒ³ãƒˆã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯æ­£å¸¸ã«è¿”ã™ |
| 9 | `getReactionsForComments`: ã‚³ãƒ¡ãƒ³ãƒˆIDãƒªã‚¹ãƒˆãŒç©º | ç©ºã® Map ãŒè¿”ã‚‹ |

#### ReactionPicker

| # | ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ | æœŸå¾…çµæœ |
|---|-------------|---------|
| 1 | åˆæœŸè¡¨ç¤º | 8 ç¨®é¡ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒæ°´å¹³ã«è¡¨ç¤ºã•ã‚Œã‚‹ã€‚æœ€åˆã®ã‚¢ã‚¤ãƒ†ãƒ ãŒé¸æŠçŠ¶æ…‹ |
| 2 | `â†’` ã§å³ç§»å‹• | æ¬¡ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒé¸æŠã•ã‚Œã‚‹ |
| 3 | `â†` ã§å·¦ç§»å‹• | å‰ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒé¸æŠã•ã‚Œã‚‹ |
| 4 | `l` ã§å³ç§»å‹• | `â†’` ã¨åŒç­‰ã®å‹•ä½œ |
| 5 | `h` ã§å·¦ç§»å‹• | `â†` ã¨åŒç­‰ã®å‹•ä½œ |
| 6 | å³ç«¯ã§ `â†’` | å·¦ç«¯ã«å¾ªç’°ã™ã‚‹ |
| 7 | å·¦ç«¯ã§ `â†` | å³ç«¯ã«å¾ªç’°ã™ã‚‹ |
| 8 | Enter ã§é€ä¿¡ | `onSelect` ãŒé¸æŠä¸­ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã® `shortCode` ã§å‘¼ã°ã‚Œã‚‹ |
| 9 | Esc ã§ã‚­ãƒ£ãƒ³ã‚»ãƒ« | `onCancel` ãŒå‘¼ã°ã‚Œã‚‹ |
| 10 | `isProcessing` ãŒ `true` | "Adding reaction..." ãŒè¡¨ç¤ºã•ã‚Œã‚‹ |
| 11 | ã‚¨ãƒ©ãƒ¼è¡¨ç¤º | ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ |
| 12 | ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºä¸­ã«ã‚­ãƒ¼å…¥åŠ› | `onClearError` ãŒå‘¼ã°ã‚Œã‚‹ |
| 13 | é€ä¿¡ä¸­ã«ã‚­ãƒ¼å…¥åŠ› | å…¥åŠ›ãŒç„¡è¦–ã•ã‚Œã‚‹ |

#### formatReactionBadge

| # | ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ | æœŸå¾…çµæœ |
|---|-------------|---------|
| 1 | ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãªã—ï¼ˆ`undefined`ï¼‰ | ç©ºæ–‡å­—åˆ—ãŒè¿”ã‚‹ |
| 2 | ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãªã—ï¼ˆç©ºé…åˆ—ï¼‰ | ç©ºæ–‡å­—åˆ—ãŒè¿”ã‚‹ |
| 3 | å˜ä¸€ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ | `"ğŸ‘Ã—2"` ã®ã‚ˆã†ãªæ–‡å­—åˆ—ãŒè¿”ã‚‹ |
| 4 | è¤‡æ•°ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ | `"ğŸ‘Ã—2 ğŸ‰Ã—1"` ã®ã‚ˆã†ã«ã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Šã§è¿”ã‚‹ |
| 5 | ã‚«ã‚¦ãƒ³ãƒˆ 0 ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ | è¡¨ç¤ºã‹ã‚‰é™¤å¤–ã•ã‚Œã‚‹ |

#### PullRequestDetailï¼ˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰

| # | ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ | æœŸå¾…çµæœ |
|---|-------------|---------|
| 1 | ã‚³ãƒ¡ãƒ³ãƒˆè¡Œã§ `g` ã‚­ãƒ¼ | ReactionPicker ãŒè¡¨ç¤ºã•ã‚Œã‚‹ |
| 2 | éã‚³ãƒ¡ãƒ³ãƒˆè¡Œã§ `g` ã‚­ãƒ¼ | ä½•ã‚‚èµ·ã“ã‚‰ãªã„ |
| 3 | fold-indicator è¡Œã§ `g` ã‚­ãƒ¼ | ä½•ã‚‚èµ·ã“ã‚‰ãªã„ï¼ˆcommentId ãªã—ï¼‰ |
| 4 | ã‚³ãƒŸãƒƒãƒˆãƒ“ãƒ¥ãƒ¼ï¼ˆviewIndex >= 0ï¼‰ã§ `g` ã‚­ãƒ¼ | ä½•ã‚‚èµ·ã“ã‚‰ãªã„ |
| 5 | ReactionPicker ã§ Enter | `onReact` ãŒ commentId ã¨ shortCode ã§å‘¼ã°ã‚Œã‚‹ |
| 6 | ReactionPicker ã§ Esc | ãƒ”ãƒƒã‚«ãƒ¼ãŒé–‰ã˜ã¦é€šå¸¸è¡¨ç¤ºã«æˆ»ã‚‹ |
| 7 | `isReacting` ãŒ `true` | "Adding reaction..." ãŒè¡¨ç¤ºã•ã‚Œã‚‹ |
| 8 | ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ | ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ |
| 9 | ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Œäº†å¾Œ | ãƒ”ãƒƒã‚«ãƒ¼ãŒé–‰ã˜ã‚‹ |
| 10 | ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒãƒƒã‚¸è¡¨ç¤º | ã‚³ãƒ¡ãƒ³ãƒˆè¡Œã«ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒãƒƒã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ |
| 11 | ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãªã—ã®ã‚³ãƒ¡ãƒ³ãƒˆ | ãƒãƒƒã‚¸ãªã— |
| 12 | ãƒ”ãƒƒã‚«ãƒ¼è¡¨ç¤ºä¸­ã« `c` / `R` ç­‰ | ç„¡è¦–ã•ã‚Œã‚‹ |
| 13 | ãƒ•ãƒƒã‚¿ãƒ¼ã« `g react` ãŒè¡¨ç¤º | ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ’ãƒ³ãƒˆãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹ |

#### Appï¼ˆçµ±åˆãƒ†ã‚¹ãƒˆï¼‰

| # | ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ | æœŸå¾…çµæœ |
|---|-------------|---------|
| 1 | ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ æˆåŠŸ | `putReaction` ãŒå‘¼ã°ã‚Œã€è©²å½“ã‚³ãƒ¡ãƒ³ãƒˆã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒãƒªãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ |
| 2 | ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³å¤±æ•—ï¼ˆCommentDeletedï¼‰ | "Comment has already been deleted." ã‚¨ãƒ©ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹ |
| 3 | ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³å¤±æ•—ï¼ˆInvalidReactionValueï¼‰ | "Invalid reaction value." ã‚¨ãƒ©ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹ |
| 4 | ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³å¤±æ•—ï¼ˆAccessDeniedï¼‰ | "Access denied..." ã‚¨ãƒ©ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹ |
| 5 | PR è©³ç´°èª­ã¿è¾¼ã¿æ™‚ã«ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³å–å¾— | `getReactionsForComments` ãŒã‚³ãƒ¡ãƒ³ãƒˆIDãƒªã‚¹ãƒˆã§å‘¼ã°ã‚Œã‚‹ |
| 6 | ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿å¾Œã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒªãƒ­ãƒ¼ãƒ‰ | `reloadComments` å†…ã§ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±ã‚‚ãƒªãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ |

#### Help

| # | ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ | æœŸå¾…çµæœ |
|---|-------------|---------|
| 1 | ãƒ˜ãƒ«ãƒ—ç”»é¢è¡¨ç¤º | `g` ã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹ |

## å®Ÿè£…é †åº

å„ Step ã¯ TDD ã‚µã‚¤ã‚¯ãƒ«ï¼ˆRed â†’ Green â†’ Refactorï¼‰ã§é€²ã‚ã‚‹ã€‚ãƒ†ã‚¹ãƒˆã‚’å…ˆã«æ›¸ãã€æœ€å°é™ã®å®Ÿè£…ã§é€šã—ã€ãã®å¾Œãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã™ã‚‹ã€‚

### Step 1: ã‚µãƒ¼ãƒ“ã‚¹å±¤ â€” putReaction, getReactionsForComment, getReactionsForComments è¿½åŠ 

`src/services/codecommit.ts` ã« 3 ã¤ã®é–¢æ•°ã€æ–°è¦ Command ã® importã€`ReactionSummary`, `ReactionsByComment` å‹ã‚’è¿½åŠ ã€‚ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ã—ã¦é€šéã‚’ç¢ºèªã€‚

**ã“ã® Step ã§å¤‰æ›´ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/services/codecommit.ts`: é–¢æ•°è¿½åŠ ã€import è¿½åŠ ã€å‹è¿½åŠ 
- `src/services/codecommit.test.ts`: ãƒ†ã‚¹ãƒˆè¿½åŠ 

**ã“ã® Step ã®å®Œäº†æ¡ä»¶**: å…¨ãƒ†ã‚¹ãƒˆãŒé€šéã€‚æ—¢å­˜ãƒ†ã‚¹ãƒˆã«å½±éŸ¿ãªã—ã€‚

### Step 2: ReactionPicker ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ

æ–°è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã—ã¦ `ReactionPicker` ã‚’ä½œæˆã€‚8 ç¨®é¡ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ°´å¹³ãƒªã‚¹ãƒˆè¡¨ç¤ºã—ã€`â†`/`â†’` ã§é¸æŠã€Enter ã§é€ä¿¡ã€Esc ã§ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã€‚

**ã“ã® Step ã§å¤‰æ›´ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/components/ReactionPicker.tsx`: æ–°è¦ä½œæˆ
- `src/components/ReactionPicker.test.tsx`: æ–°è¦ä½œæˆ

**ã“ã® Step ã®å®Œäº†æ¡ä»¶**: ReactionPicker ã®å…¨ãƒ†ã‚¹ãƒˆãŒé€šéã€‚

### Step 3: PullRequestDetail ã«ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¡¨ç¤ºã‚’è¿½åŠ 

`buildDisplayLines` ã¨ `appendThreadLines` ã‚’å¤‰æ›´ã—ã€ã‚³ãƒ¡ãƒ³ãƒˆè¡Œã«ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒãƒƒã‚¸ã‚’è¡¨ç¤ºã€‚`renderDiffLine` ã‚’å¤‰æ›´ã—ã¦ `reactionText` ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã€‚`formatReactionBadge` ãƒ˜ãƒ«ãƒ‘ãƒ¼ã‚’è¿½åŠ ã€‚

**ã“ã® Step ã§å¤‰æ›´ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/components/PullRequestDetail.tsx`: `buildDisplayLines`, `appendThreadLines`, `renderDiffLine` å¤‰æ›´ã€‚`formatReactionBadge` è¿½åŠ ã€‚`DisplayLine` ã« `reactionText` è¿½åŠ 
- `src/components/PullRequestDetail.test.tsx`: ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒãƒƒã‚¸è¡¨ç¤ºã®ãƒ†ã‚¹ãƒˆè¿½åŠ 

**ã“ã® Step ã®å®Œäº†æ¡ä»¶**: ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒãƒƒã‚¸ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ãƒ†ã‚¹ãƒˆãŒé€šéã€‚

### Step 4: PullRequestDetail ã«ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ“ä½œ UI ã‚’çµ±åˆ

`g` ã‚­ãƒ¼ãƒãƒ³ãƒ‰ãƒ©è¿½åŠ ã€‚ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ”ãƒƒã‚«ãƒ¼ã®çµ±åˆã€‚Props è¿½åŠ ã€‚`isPickingReaction` ã®çŠ¶æ…‹ç®¡ç†ã€‚

**ã“ã® Step ã§å¤‰æ›´ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/components/PullRequestDetail.tsx`: state è¿½åŠ ã€ã‚­ãƒ¼ãƒãƒ³ãƒ‰ãƒ©è¿½åŠ ã€ReactionPicker ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°è¿½åŠ ã€Props è¿½åŠ 
- `src/components/PullRequestDetail.test.tsx`: `g` ã‚­ãƒ¼æ“ä½œã®ãƒ†ã‚¹ãƒˆè¿½åŠ 

**ã“ã® Step ã®å®Œäº†æ¡ä»¶**: PullRequestDetail ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ“ä½œãƒ†ã‚¹ãƒˆãŒé€šéã€‚

### Step 5: App ã«ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒãƒ³ãƒ‰ãƒ©ã‚’çµ±åˆ

`handleReact` è¿½åŠ ã€‚state è¿½åŠ ã€‚`loadPullRequestDetail` ã«ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³å–å¾—ã‚’è¿½åŠ ã€‚`reloadComments` ã«ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒªãƒ­ãƒ¼ãƒ‰ã‚’è¿½åŠ ã€‚`formatErrorMessage` æ‹¡å¼µã€‚

**ã“ã® Step ã§å¤‰æ›´ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/app.tsx`: ãƒãƒ³ãƒ‰ãƒ©è¿½åŠ ã€state è¿½åŠ ã€Props æ¸¡ã—ã€`formatErrorMessage` æ‹¡å¼µã€`loadPullRequestDetail` å¤‰æ›´ã€`reloadComments` å¤‰æ›´
- `src/app.test.tsx`: çµ±åˆãƒ†ã‚¹ãƒˆè¿½åŠ 

**ã“ã® Step ã®å®Œäº†æ¡ä»¶**: ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æˆåŠŸâ†’ãƒªãƒ­ãƒ¼ãƒ‰ã®çµ±åˆãƒ†ã‚¹ãƒˆãŒé€šéã€‚

### Step 6: Help æ›´æ–°

`g` ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚’è¿½åŠ ã€‚

**ã“ã® Step ã§å¤‰æ›´ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/components/Help.tsx`: ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰è¡Œè¿½åŠ 
- `src/components/Help.test.tsx`: ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãƒ†ã‚¹ãƒˆæ›´æ–°

**ã“ã® Step ã®å®Œäº†æ¡ä»¶**: Help ç”»é¢ã« `g React to comment` ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚

### Step 7: å…¨ä½“ãƒ†ã‚¹ãƒˆãƒ»ã‚«ãƒãƒ¬ãƒƒã‚¸ç¢ºèª

```bash
bun run ci
```

**ã“ã® Step ã®å®Œäº†æ¡ä»¶**:
- oxlint: ã‚¨ãƒ©ãƒ¼ãªã—
- Biome: ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒã‚§ãƒƒã‚¯é€šé
- TypeScript: å‹ãƒã‚§ãƒƒã‚¯é€šé
- knip: æœªä½¿ç”¨ export ãªã—
- vitest: ã‚«ãƒãƒ¬ãƒƒã‚¸ 95% ä»¥ä¸Š
- build: æœ¬ç•ªãƒ“ãƒ«ãƒ‰æˆåŠŸ

### Step 8: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

**ã“ã® Step ã§å¤‰æ›´ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«**:
- `docs/requirements.md`: v0.2.0 æ©Ÿèƒ½ã‚¹ã‚³ãƒ¼ãƒ—ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ ã€ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰è¡¨ã« `g` / `â†â†’` / `h` / `l` è¿½åŠ ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°è¡¨ã«ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼è¿½åŠ 
- `docs/roadmap.md`: v0.2.0 ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã« âœ… ãƒãƒ¼ã‚¯è¿½åŠ 
- `README.md`: æ©Ÿèƒ½ä¸€è¦§ã«ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½è¨˜

**ã“ã® Step ã®å®Œäº†æ¡ä»¶**: è¦ä»¶å®šç¾©æ›¸ãƒ»ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ãƒ»README ãŒè¨­è¨ˆæ›¸ã®å†…å®¹ã¨æ•´åˆã—ã¦ã„ã‚‹ã€‚
